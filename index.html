<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaders Language School - Grade Portal</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #7c3aed;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --gray-light: #e2e8f0;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #dbeafe, #e0f2fe);
            color: var(--dark);
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
            margin-bottom: 30px;
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .school-logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .logo-text {
            font-size: 26px;
            font-weight: 700;
            color: var(--dark);
        }
        .school-name {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary);
            line-height: 1.2;
        }
        .school-subtitle {
            font-size: 14px;
            color: var(--gray);
            font-weight: 500;
        }
        .nav-tabs {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .nav-tab {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .nav-tab.active {
            background: var(--primary-light);
            color: white;
        }
        .nav-tab:not(.active):hover {
            background: var(--gray-light);
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-bottom: 30px;
        }
        .card-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
        }
        .card-subtitle {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-light);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 16px;
            border: none;
        }
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        .btn-primary:hover {
            background: #4338ca;
        }
        .btn-success {
            background: var(--success);
            color: white;
        }
        .btn-success:hover {
            background: #059669;
        }
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        .btn-danger:hover {
            background: #dc2626;
        }
        .btn-secondary {
            background: var(--secondary);
            color: white;
        }
        .btn-secondary:hover {
            background: #6d28d9;
        }
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        .btn-warning:hover {
            background: #d97706;
        }
        .grid {
            display: grid;
            gap: 20px;
        }
        .grid-cols-1 {
            grid-template-columns: 1fr;
        }
        .grid-cols-2 {
            grid-template-columns: 1fr 1fr;
        }
        .grid-cols-3 {
            grid-template-columns: 1fr 1fr 1fr;
        }
        .grid-cols-4 {
            grid-template-columns: 1fr 1fr 1fr 1fr;
        }
        @media (max-width: 768px) {
            .grid-cols-2, .grid-cols-3, .grid-cols-4 {
                grid-template-columns: 1fr;
            }
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .nav-tabs {
                width: 100%;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .alert-danger {
            background: #fee2e2;
            border: 1px solid #fecaca;
            color: #dc2626;
        }
        .alert-success {
            background: #dcfce7;
            border: 1px solid #bbf7d0;
            color: #16a34a;
        }
        .student-header {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .student-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .student-name {
            font-size: 24px;
            font-weight: 700;
        }
        .student-grade {
            font-size: 18px;
            opacity: 0.9;
        }
        .grades-stats {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        .grade-stat {
            text-align: center;
        }
        .grade-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .grade-label {
            font-size: 14px;
            opacity: 0.8;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--gray-light);
        }
        th {
            background: var(--gray-light);
            font-weight: 600;
            color: var(--dark);
        }
        tr:hover {
            background: var(--gray-light);
        }
        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        .badge-success {
            background: #dcfce7;
            color: #16a34a;
        }
        .badge-info {
            background: #dbeafe;
            color: #2563eb;
        }
        .badge-warning {
            background: #fef3c7;
            color: #d97706;
        }
        .badge-danger {
            background: #fee2e2;
            color: #dc2626;
        }
        .subject-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--gray-light);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .subject-name {
            font-weight: 600;
        }
        .subject-score {
            margin-left: 20px;
        }
        footer {
            background: white;
            border-top: 1px solid var(--gray-light);
            padding: 30px 0;
            margin-top: 50px;
        }
        .footer-content {
            text-align: center;
            color: var(--gray);
            font-size: 14px;
        }
        .id-generator {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px dashed var(--primary);
        }
        .generated-id {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin: 15px 0;
            letter-spacing: 2px;
        }
        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--gray-light);
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }
        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        /* Month selector styling */
        .month-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .month-btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid var(--gray-light);
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .month-btn:hover {
            background: var(--gray-light);
        }
        .month-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .month-btn.no-data {
            background: #f8fafc;
            color: #94a3b8;
            border-style: dashed;
        }
        .month-btn.has-data {
            background: #dbeafe;
            color: #1e40af;
            font-weight: 600;
        }
        /* Grade-specific styling */
        .grade-kg {
            background-color: #fef3c7;
            color: #92400e;
        }
        .grade-elementary {
            background-color: #dbeafe;
            color: #1e40af;
        }
        .grade-prep {
            background-color: #f3e8ff;
            color: #7e22ce;
        }
        /* Monthly overview table */
        .monthly-overview {
            margin: 30px 0;
        }
        .monthly-overview th, .monthly-overview td {
            text-align: center;
            padding: 12px;
        }
        .monthly-overview .month-header {
            background: var(--primary-light);
            color: white;
        }
        .no-grades {
            color: var(--gray);
            font-style: italic;
        }
        /* Export/Import buttons */
        .data-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 500px;
            text-align: center;
        }
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
        }
        .login-form {
            margin-top: 20px;
        }
        .login-error {
            color: var(--danger);
            margin: 15px 0;
            padding: 10px;
            background: #fee2e2;
            border-radius: 8px;
            display: none;
        }
        .close-modal {
            position: absolute;
            right: 25px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: var(--gray);
        }
        .close-modal:hover {
            color: var(--dark);
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="school-logo">LLS</div>
                <div>
                    <div class="school-name">Leaders Language School</div>
                    <div class="school-subtitle">Empowering Future Leaders</div>
                </div>
            </div>
            <div class="nav-tabs">
                <div class="nav-tab active" id="parent-tab">Parent Portal</div>
                <div class="nav-tab" id="school-tab">School Portal</div>
            </div>
        </div>
    </header>
    <div class="container">
        <div id="parent-portal">
            <div class="card">
                <h2 class="card-title">Parent Portal</h2>
                <p class="card-subtitle">Enter your child's Student ID to view their monthly grades.</p>
                <form id="search-form">
                    <div class="form-group">
                        <label for="student-id" class="form-label">Student ID</label>
                        <input type="text" id="student-id" class="form-control" placeholder="Enter Student ID (e.g., STU001)" required>
                    </div>
                    <button type="submit" class="btn btn-primary">View Grades</button>
                </form>
                <div id="error-message" class="alert alert-danger" style="display: none;"></div>
                <div id="student-results" style="display: none;">
                    <div class="student-header">
                        <div class="student-info">
                            <div>
                                <div class="student-name" id="student-name">John Smith</div>
                                <div class="student-grade" id="student-grade">Grade 1</div>
                                <div>Student ID: <span id="display-student-id">STU001</span></div>
                            </div>
                        </div>
                    </div>
                    <h3>Monthly Grades Overview</h3>
                    <div class="month-selector" id="parent-month-selector">
                        <!-- Months will be populated here -->
                    </div>
                    <div id="monthly-grades-container">
                        <!-- Monthly grades will be displayed here -->
                    </div>
                    <div class="monthly-overview">
                        <h3>Yearly Performance Overview</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Subject</th>
                                    <th>September</th>
                                    <th>October</th>
                                    <th>November</th>
                                    <th>December</th>
                                    <th>January</th>
                                    <th>February</th>
                                    <th>March</th>
                                    <th>April</th>
                                    <th>May</th>
                                    <th>June</th>
                                    <th>Average</th>
                                </tr>
                            </thead>
                            <tbody id="yearly-overview-table">
                                <!-- Yearly overview will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div id="school-portal" style="display: none;">
            <div class="card">
                <h2 class="card-title">School Portal</h2>
                <p class="card-subtitle">Create student records and manage monthly grades.</p>
                <div class="tabs">
                    <div class="tab active" data-tab="create-student">Create Student</div>
                    <div class="tab" data-tab="manage-grades">Manage Grades</div>
                    <div class="tab" data-tab="generate-id">Generate Student ID</div>
                    <div class="tab" data-tab="view-students">View All Students</div>
                </div>
                <div id="create-student" class="tab-content active">
                    <h3>Student Information</h3>
                    <div class="id-generator">
                        <h4>Student ID Generator</h4>
                        <p>Click the button below to generate a unique Student ID, or enter your own.</p>
                        <div class="generated-id" id="generated-student-id">STU0000</div>
                        <div style="text-align: center;">
                            <button type="button" id="generate-id-btn" class="btn btn-secondary">Generate New ID</button>
                            <button type="button" id="copy-id-btn" class="copy-btn">Copy</button>
                        </div>
                    </div>
                    <form id="create-student-form">
                        <div class="grid grid-cols-3" id="student-info-grid">
                            <div class="form-group">
                                <label for="new-student-id" class="form-label">Student ID *</label>
                                <input type="text" id="new-student-id" class="form-control" placeholder="e.g., STU004" required>
                            </div>
                            <div class="form-group">
                                <label for="new-student-name" class="form-label">Student Name *</label>
                                <input type="text" id="new-student-name" class="form-control" placeholder="Enter full name" required>
                            </div>
                            <div class="form-group">
                                <label for="new-student-grade" class="form-label">Grade Level *</label>
                                <select id="new-student-grade" class="form-control" required>
                                    <option value="">Select Grade</option>
                                    <option value="KG1">KG1</option>
                                    <option value="KG2">KG2</option>
                                    <option value="Grade 1">Grade 1</option>
                                    <option value="Grade 2">Grade 2</option>
                                    <option value="Grade 3">Grade 3</option>
                                    <option value="Grade 4">Grade 4</option>
                                    <option value="Grade 5">Grade 5</option>
                                    <option value="Grade 6">Grade 6</option>
                                    <option value="Prep 1">Prep 1</option>
                                    <option value="Prep 2">Prep 2</option>
                                    <option value="Prep 3">Prep 3</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success">Create Student Record</button>
                    </form>
                </div>
                <div id="manage-grades" class="tab-content">
                    <h3>Manage Monthly Grades</h3>
                    <form id="find-student-form">
                        <div class="form-group">
                            <label for="manage-student-id" class="form-label">Student ID *</label>
                            <input type="text" id="manage-student-id" class="form-control" placeholder="Enter Student ID" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Load Student</button>
                    </form>
                    <div id="manage-student-info" style="display: none; margin: 30px 0;">
                        <div class="student-header">
                            <div class="student-info">
                                <div>
                                    <div class="student-name" id="manage-student-name">John Smith</div>
                                    <div class="student-grade" id="manage-student-grade">Grade 1</div>
                                    <div>Student ID: <span id="manage-display-student-id">STU001</span></div>
                                </div>
                            </div>
                        </div>
                        <h4>Select Month</h4>
                        <div class="month-selector" id="school-month-selector">
                            <!-- Months will be populated here -->
                        </div>
                        <div id="grades-form-container" style="display: none; margin-top: 30px;">
                            <h4>Enter Grades for <span id="selected-month">September</span></h4>
                            <div id="subjects-input-container">
                                <!-- Subject inputs will be generated here -->
                            </div>
                            <button type="button" id="add-subject-btn" class="btn btn-primary" style="margin: 20px 0;">Add Subject</button>
                            <div id="existing-subjects-list" style="margin: 20px 0;">
                                <h5>Current Subjects</h5>
                                <div id="subjects-list">
                                    <!-- Existing subjects will appear here -->
                                </div>
                            </div>
                            <button type="button" id="save-grades-btn" class="btn btn-success">Save Grades for <span id="save-month-display">September</span></button>
                        </div>
                    </div>
                </div>
                <div id="generate-id" class="tab-content">
                    <h3>Student ID Generator</h3>
                    <p>Use this tool to generate unique Student IDs for new students.</p>
                    <div class="id-generator">
                        <h4>Generate a New Student ID</h4>
                        <div class="generated-id" id="standalone-generated-id">STU0000</div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button type="button" id="standalone-generate-btn" class="btn btn-secondary">Generate New ID</button>
                            <button type="button" id="standalone-copy-btn" class="copy-btn">Copy</button>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 30px;">
                        <label for="custom-prefix" class="form-label">Custom Prefix (optional)</label>
                        <input type="text" id="custom-prefix" class="form-control" placeholder="e.g., SCH, ACD (leave blank for default 'STU')">
                    </div>
                    <div class="form-group">
                        <label for="id-number" class="form-label">Starting Number</label>
                        <input type="number" id="id-number" class="form-control" value="1" min="1">
                    </div>
                    <button type="button" id="apply-custom-settings" class="btn btn-primary">Apply Custom Settings</button>
                    <div class="alert alert-success" style="margin-top: 30px;">
                        <h4>How to Use:</h4>
                        <p>1. Generate a new ID using the button above</p>
                        <p>2. Customize the prefix and starting number if needed</p>
                        <p>3. Copy the generated ID and use it when creating a new student record</p>
                    </div>
                </div>
                <div id="view-students" class="tab-content">
                    <h3>Existing Students</h3>
                    <div class="data-actions">
                        <button type="button" id="export-data-btn" class="btn btn-primary">Export Data</button>
                        <label class="btn btn-success" style="cursor: pointer;">
                            Import Data
                            <input type="file" id="import-data-input" accept=".json" style="display: none;">
                        </label>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Grade</th>
                                <th>Months with Data</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="students-table">
                            <!-- Existing students will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="close-login-modal">&times;</span>
            <h2 class="modal-title">Leaders Language School Portal</h2>
            <p>Please log in to access the School Portal</p>
            <div class="login-error" id="login-error"></div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;">Login</button>
            </form>
            <p style="margin-top: 20px; font-size: 14px; color: var(--gray);">
                Authorized staff only: Khalid Owner (kha11) or Principal Doaa (Do22)
            </p>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                &copy; 2023 Leaders Language School. All rights reserved.
            </div>
        </div>
    </footer>
    <script>
        // Months array
        const months = [
            'September', 'October', 'November', 'December',
            'January', 'February', 'March', 'April', 'May', 'June'
        ];
        // Mock data with monthly grades
        let students = [
            {
                id: 'STU001',
                name: 'Ahmed Mohamed',
                grade: 'KG1',
                monthlyGrades: {
                    September: [
                        { name: 'Arabic', score: 92 },
                        { name: 'English', score: 88 },
                        { name: 'Math', score: 95 },
                        { name: 'Art', score: 97 },
                        { name: 'Music', score: 90 }
                    ],
                    October: [
                        { name: 'Arabic', score: 94 },
                        { name: 'English', score: 90 },
                        { name: 'Math', score: 96 },
                        { name: 'Art', score: 95 },
                        { name: 'Music', score: 92 }
                    ],
                    November: [
                        { name: 'Arabic', score: 90 },
                        { name: 'English', score: 87 },
                        { name: 'Math', score: 93 },
                        { name: 'Art', score: 96 },
                        { name: 'Music', score: 89 }
                    ]
                }
            },
            {
                id: 'STU002',
                name: 'Fatima Ali',
                grade: 'Grade 3',
                monthlyGrades: {
                    September: [
                        { name: 'Arabic', score: 87 },
                        { name: 'English', score: 91 },
                        { name: 'Math', score: 85 },
                        { name: 'Science', score: 89 },
                        { name: 'Social Studies', score: 93 }
                    ],
                    October: [
                        { name: 'Arabic', score: 89 },
                        { name: 'English', score: 93 },
                        { name: 'Math', score: 88 },
                        { name: 'Science', score: 91 },
                        { name: 'Social Studies', score: 95 }
                    ]
                }
            },
            {
                id: 'STU003',
                name: 'Omar Hassan',
                grade: 'Prep 2',
                monthlyGrades: {
                    September: [
                        { name: 'Arabic', score: 78 },
                        { name: 'English', score: 82 },
                        { name: 'Math', score: 88 },
                        { name: 'Science', score: 85 },
                        { name: 'History', score: 80 },
                        { name: 'Geography', score: 83 }
                    ]
                }
            },
            {
                id: 'STU004',
                name: 'Layla Ibrahim',
                grade: 'Grade 6',
                monthlyGrades: {
                    September: [
                        { name: 'Arabic', score: 94 },
                        { name: 'English', score: 89 },
                        { name: 'Math', score: 92 },
                        { name: 'Science', score: 87 },
                        { name: 'Computer Science', score: 95 },
                        { name: 'Physical Education', score: 91 }
                    ]
                }
            },
            {
                id: 'STU005',
                name: 'Youssef Mahmoud',
                grade: 'KG2',
                monthlyGrades: {
                    September: [
                        { name: 'Arabic', score: 90 },
                        { name: 'English', score: 85 },
                        { name: 'Math Basics', score: 93 },
                        { name: 'Art', score: 96 },
                        { name: 'Music', score: 88 }
                    ],
                    October: [
                        { name: 'Arabic', score: 92 },
                        { name: 'English', score: 88 },
                        { name: 'Math Basics', score: 95 },
                        { name: 'Art', score: 97 },
                        { name: 'Music', score: 91 }
                    ],
                    November: [
                        { name: 'Arabic', score: 89 },
                        { name: 'English', score: 86 },
                        { name: 'Math Basics', score: 94 },
                        { name: 'Art', score: 95 },
                        { name: 'Music', score: 90 }
                    ],
                    December: [
                        { name: 'Arabic', score: 93 },
                        { name: 'English', score: 89 },
                        { name: 'Math Basics', score: 96 },
                        { name: 'Art', score: 98 },
                        { name: 'Music', score: 92 }
                    ]
                }
            }
        ];
        // DOM Elements
        const parentTab = document.getElementById('parent-tab');
        const schoolTab = document.getElementById('school-tab');
        const parentPortal = document.getElementById('parent-portal');
        const schoolPortal = document.getElementById('school-portal');
        const searchForm = document.getElementById('search-form');
        const studentIdInput = document.getElementById('student-id');
        const errorMessage = document.getElementById('error-message');
        const studentResults = document.getElementById('student-results');
        const studentName = document.getElementById('student-name');
        const studentGrade = document.getElementById('student-grade');
        const displayStudentId = document.getElementById('display-student-id');
        const parentMonthSelector = document.getElementById('parent-month-selector');
        const monthlyGradesContainer = document.getElementById('monthly-grades-container');
        const yearlyOverviewTable = document.getElementById('yearly-overview-table');
        const createStudentForm = document.getElementById('create-student-form');
        const newStudentId = document.getElementById('new-student-id');
        const newStudentName = document.getElementById('new-student-name');
        const newStudentGrade = document.getElementById('new-student-grade');
        const generatedStudentId = document.getElementById('generated-student-id');
        const generateIdBtn = document.getElementById('generate-id-btn');
        const copyIdBtn = document.getElementById('copy-id-btn');
        const standaloneGeneratedId = document.getElementById('standalone-generated-id');
        const standaloneGenerateBtn = document.getElementById('standalone-generate-btn');
        const standaloneCopyBtn = document.getElementById('standalone-copy-btn');
        const customPrefix = document.getElementById('custom-prefix');
        const idNumber = document.getElementById('id-number');
        const applyCustomSettingsBtn = document.getElementById('apply-custom-settings');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const findStudentForm = document.getElementById('find-student-form');
        const manageStudentId = document.getElementById('manage-student-id');
        const manageStudentInfo = document.getElementById('manage-student-info');
        const manageStudentName = document.getElementById('manage-student-name');
        const manageStudentGrade = document.getElementById('manage-student-grade');
        const manageDisplayStudentId = document.getElementById('manage-display-student-id');
        const schoolMonthSelector = document.getElementById('school-month-selector');
        const gradesFormContainer = document.getElementById('grades-form-container');
        const selectedMonthSpan = document.getElementById('selected-month');
        const saveMonthDisplay = document.getElementById('save-month-display');
        const subjectsInputContainer = document.getElementById('subjects-input-container');
        const addSubjectBtn = document.getElementById('add-subject-btn');
        const subjectsList = document.getElementById('subjects-list');
        const saveGradesBtn = document.getElementById('save-grades-btn');
        const studentsTable = document.getElementById('students-table');
        const exportDataBtn = document.getElementById('export-data-btn');
        const importDataInput = document.getElementById('import-data-input');
        // Login elements
        const loginModal = document.getElementById('login-modal');
        const closeLoginModal = document.getElementById('close-login-modal');
        const loginForm = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');
        
        // State
        let currentStudent = null;
        let currentMonth = 'September';
        let currentSubjects = [];
        let nextStudentNumber = 6; // Start after the 5 demo students
        let idPrefix = 'STU';
        let currentIdNumber = 1;
        let isAuthenticated = false;
        
        // Valid school staff credentials
        const validStaff = [
            { id: 'kha11', name: 'Khalid Owner', role: 'Owner' },
            { id: 'Do22', name: 'Doaa', role: 'Principal' }
        ];
        
        // Tab switching for main navigation
        parentTab.addEventListener('click', () => {
            parentTab.classList.add('active');
            schoolTab.classList.remove('active');
            parentPortal.style.display = 'block';
            schoolPortal.style.display = 'none';
        });
        
        schoolTab.addEventListener('click', () => {
            if (!isAuthenticated) {
                // Show login modal
                loginModal.style.display = 'flex';
            } else {
                schoolTab.classList.add('active');
                parentTab.classList.remove('active');
                schoolPortal.style.display = 'block';
                parentPortal.style.display = 'none';
                renderExistingStudents();
            }
        });
        
        // Close login modal
        closeLoginModal.addEventListener('click', () => {
            loginModal.style.display = 'none';
            loginError.style.display = 'none';
            loginError.textContent = '';
            usernameInput.value = '';
            passwordInput.value = '';
        });
        
        // Handle login form submission
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = usernameInput.value.trim();
            const password = passwordInput.value;
            
            // Check if user is valid staff member
            const staffMember = validStaff.find(staff => staff.id === username);
            
            if (staffMember && password === 'password') {
                // Successful login
                isAuthenticated = true;
                loginModal.style.display = 'none';
                
                // Switch to school portal
                schoolTab.classList.add('active');
                parentTab.classList.remove('active');
                schoolPortal.style.display = 'block';
                parentPortal.style.display = 'none';
                renderExistingStudents();
                
                // Reset form
                loginError.style.display = 'none';
                usernameInput.value = '';
                passwordInput.value = '';
            } else {
                // Failed login
                loginError.textContent = 'Invalid credentials. Please try again.';
                loginError.style.display = 'block';
            }
        });
        
        // Tab switching within School Portal
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                // Add active class to clicked tab
                tab.classList.add('active');
                // Hide all tab contents
                tabContents.forEach(content => content.classList.remove('active'));
                // Show corresponding tab content
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Search for student in Parent Portal
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = studentIdInput.value.trim();
            const student = students.find(s => s.id === id);
            if (student) {
                currentStudent = student;
                displayStudentInfo(student);
                renderParentMonthSelector(student);
                renderYearlyOverview(student);
                errorMessage.style.display = 'none';
                studentResults.style.display = 'block';
            } else {
                errorMessage.textContent = 'Student not found. Please check the ID and try again.';
                errorMessage.style.display = 'block';
                studentResults.style.display = 'none';
            }
        });
        
        // Display student information in Parent Portal
        function displayStudentInfo(student) {
            studentName.textContent = student.name;
            studentGrade.textContent = student.grade;
            displayStudentId.textContent = student.id;
        }
        
        // Render month selector for Parent Portal
        function renderParentMonthSelector(student) {
            parentMonthSelector.innerHTML = '';
            months.forEach(month => {
                const hasData = student.monthlyGrades && student.monthlyGrades[month] && student.monthlyGrades[month].length > 0;
                const monthBtn = document.createElement('button');
                monthBtn.textContent = month;
                monthBtn.className = 'month-btn';
                if (hasData) {
                    monthBtn.classList.add('has-data');
                } else {
                    monthBtn.classList.add('no-data');
                }
                monthBtn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    document.querySelectorAll('.month-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    // Add active class to clicked button
                    monthBtn.classList.add('active');
                    currentMonth = month;
                    displayMonthlyGrades(student, month);
                });
                parentMonthSelector.appendChild(monthBtn);
            });
            // Set first month with data as active, or September if no data
            const firstMonthWithData = months.find(month => 
                student.monthlyGrades && student.monthlyGrades[month] && student.monthlyGrades[month].length > 0
            ) || 'September';
            const firstBtn = parentMonthSelector.querySelector(`button:contains('${firstMonthWithData}')`) || 
                           parentMonthSelector.querySelector('button');
            if (firstBtn) {
                firstBtn.classList.add('active');
                currentMonth = firstMonthWithData;
                displayMonthlyGrades(student, firstMonthWithData);
            }
        }
        
        // Display monthly grades
        function displayMonthlyGrades(student, month) {
            const monthlyGrades = student.monthlyGrades && student.monthlyGrades[month] ? student.monthlyGrades[month] : [];
            monthlyGradesContainer.innerHTML = '';
            if (monthlyGrades.length === 0) {
                monthlyGradesContainer.innerHTML = `
                    <div class="alert alert-danger">
                        No grades recorded for ${month} yet.
                    </div>
                `;
                return;
            }
            const average = calculateAverage(monthlyGrades);
            monthlyGradesContainer.innerHTML = `
                <div class="student-header" style="margin-bottom: 20px;">
                    <h3 style="margin: 0;">${month} Grades</h3>
                    <div style="margin-top: 15px; display: flex; gap: 30px;">
                        <div class="grade-stat">
                            <div class="grade-value">${average}</div>
                            <div class="grade-label">Average</div>
                        </div>
                        <div class="grade-stat">
                            <div class="grade-value">${getGradeLetter(average)}</div>
                            <div class="grade-label">Grade</div>
                        </div>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Score</th>
                            <th>Grade</th>
                        </tr>
                    </thead>
                    <tbody id="monthly-subjects-table">
                    </tbody>
                </table>
            `;
            const monthlySubjectsTable = document.getElementById('monthly-subjects-table');
            monthlyGrades.forEach(subject => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${subject.name}</td>
                    <td>${subject.score}</td>
                    <td>
                        <span class="badge ${getGradeBadgeClass(subject.score)}">
                            ${getGradeLetter(subject.score)}
                        </span>
                    </td>
                `;
                monthlySubjectsTable.appendChild(row);
            });
        }
        
        // Render yearly overview
        function renderYearlyOverview(student) {
            yearlyOverviewTable.innerHTML = '';
            // Get all subjects across all months
            const allSubjects = new Set();
            months.forEach(month => {
                if (student.monthlyGrades && student.monthlyGrades[month]) {
                    student.monthlyGrades[month].forEach(subject => {
                        allSubjects.add(subject.name);
                    });
                }
            });
            // Create a row for each subject
            allSubjects.forEach(subjectName => {
                const row = document.createElement('tr');
                let totalScore = 0;
                let monthsWithData = 0;
                let monthCells = '';
                months.forEach(month => {
                    const monthlyGrades = student.monthlyGrades && student.monthlyGrades[month];
                    const subject = monthlyGrades ? monthlyGrades.find(s => s.name === subjectName) : null;
                    if (subject) {
                        monthCells += `<td>${subject.score}</td>`;
                        totalScore += subject.score;
                        monthsWithData++;
                    } else {
                        monthCells += `<td class="no-grades">-</td>`;
                    }
                });
                // Calculate average for this subject
                const average = monthsWithData > 0 ? Math.round(totalScore / monthsWithData) : 0;
                const averageCell = monthsWithData > 0 ? 
                    `<td>${average}</td>` : 
                    `<td class="no-grades">-</td>`;
                row.innerHTML = `
                    <td><strong>${subjectName}</strong></td>
                    ${monthCells}
                    ${averageCell}
                `;
                yearlyOverviewTable.appendChild(row);
            });
            // Add overall average row
            if (allSubjects.size > 0) {
                const overallRow = document.createElement('tr');
                overallRow.innerHTML = `<td><strong>Overall Average</strong></td>`;
                let totalAllScores = 0;
                let totalAllEntries = 0;
                months.forEach(month => {
                    const monthlyGrades = student.monthlyGrades && student.monthlyGrades[month];
                    if (monthlyGrades && monthlyGrades.length > 0) {
                        const monthAverage = calculateAverage(monthlyGrades);
                        overallRow.innerHTML += `<td><strong>${monthAverage}</strong></td>`;
                        totalAllScores += monthAverage;
                        totalAllEntries++;
                    } else {
                        overallRow.innerHTML += `<td class="no-grades">-</td>`;
                    }
                });
                const overallAverage = totalAllEntries > 0 ? Math.round(totalAllScores / totalAllEntries) : 0;
                overallRow.innerHTML += totalAllEntries > 0 ? 
                    `<td><strong>${overallAverage}</strong></td>` : 
                    `<td class="no-grades">-</td>`;
                yearlyOverviewTable.appendChild(overallRow);
            }
        }
        
        // Find student in School Portal (Manage Grades)
        findStudentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = manageStudentId.value.trim();
            const student = students.find(s => s.id === id);
            if (student) {
                currentStudent = student;
                displayManageStudentInfo(student);
                renderSchoolMonthSelector(student);
                manageStudentInfo.style.display = 'block';
            } else {
                alert('Student not found. Please check the ID and try again.');
                manageStudentInfo.style.display = 'none';
            }
        });
        
        // Display student information in School Portal
        function displayManageStudentInfo(student) {
            manageStudentName.textContent = student.name;
            manageStudentGrade.textContent = student.grade;
            manageDisplayStudentId.textContent = student.id;
        }
        
        // Render month selector for School Portal
        function renderSchoolMonthSelector(student) {
            schoolMonthSelector.innerHTML = '';
            months.forEach(month => {
                const hasData = student.monthlyGrades && student.monthlyGrades[month] && student.monthlyGrades[month].length > 0;
                const monthBtn = document.createElement('button');
                monthBtn.textContent = month;
                monthBtn.className = 'month-btn';
                if (hasData) {
                    monthBtn.classList.add('has-data');
                } else {
                    monthBtn.classList.add('no-data');
                }
                monthBtn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    document.querySelectorAll('#school-month-selector .month-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    // Add active class to clicked button
                    monthBtn.classList.add('active');
                    currentMonth = month;
                    loadMonthGrades(student, month);
                });
                schoolMonthSelector.appendChild(monthBtn);
            });
            // Set September as default active month
            const septemberBtn = schoolMonthSelector.querySelector('button:contains("September")') || 
                               schoolMonthSelector.querySelector('button');
            if (septemberBtn) {
                septemberBtn.classList.add('active');
                currentMonth = 'September';
                loadMonthGrades(currentStudent, 'September');
            }
        }
        
        // Load month grades for editing
        function loadMonthGrades(student, month) {
            selectedMonthSpan.textContent = month;
            saveMonthDisplay.textContent = month;
            // Initialize or get monthly grades
            if (!student.monthlyGrades) {
                student.monthlyGrades = {};
            }
            if (!student.monthlyGrades[month]) {
                student.monthlyGrades[month] = [];
            }
            currentSubjects = [...student.monthlyGrades[month]];
            // Display existing subjects
            displaySubjectsList();
            // Show the grades form
            gradesFormContainer.style.display = 'block';
        }
        
        // Display subjects list for editing
        function displaySubjectsList() {
            subjectsList.innerHTML = '';
            subjectsInputContainer.innerHTML = '';
            if (currentSubjects.length === 0) {
                subjectsList.innerHTML = '<p class="no-grades">No subjects added yet.</p>';
                addSubjectInputField();
                return;
            }
            currentSubjects.forEach((subject, index) => {
                const subjectItem = document.createElement('div');
                subjectItem.className = 'subject-item';
                subjectItem.innerHTML = `
                    <div class="subject-name">${subject.name}</div>
                    <div class="subject-score">Score: ${subject.score}</div>
                    <button class="btn btn-danger remove-subject-btn" data-index="${index}">Remove</button>
                `;
                subjectsList.appendChild(subjectItem);
                // Add event listener to remove button
                subjectItem.querySelector('.remove-subject-btn').addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    currentSubjects.splice(index, 1);
                    displaySubjectsList();
                });
            });
            // Add input field for new subject
            addSubjectInputField();
        }
        
        // Add subject input field
        function addSubjectInputField() {
            const subjectDiv = document.createElement('div');
            subjectDiv.className = 'grid grid-cols-2';
            subjectDiv.style.marginBottom = '15px';
            subjectDiv.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Subject Name</label>
                    <input type="text" class="form-control subject-name-input" placeholder="e.g., Mathematics">
                </div>
                <div class="form-group">
                    <label class="form-label">Score (0-100)</label>
                    <input type="number" class="form-control subject-score-input" min="0" max="100" placeholder="Enter score">
                </div>
            `;
            subjectsInputContainer.appendChild(subjectDiv);
        }
        
        // Add subject button
        addSubjectBtn.addEventListener('click', () => {
            addSubjectInputField();
        });
        
        // Save grades button
        saveGradesBtn.addEventListener('click', () => {
            // Get all subject inputs
            const nameInputs = document.querySelectorAll('.subject-name-input');
            const scoreInputs = document.querySelectorAll('.subject-score-input');
            // Clear current subjects
            currentSubjects = [];
            // Add subjects from inputs
            for (let i = 0; i < nameInputs.length; i++) {
                const name = nameInputs[i].value.trim();
                const score = parseInt(scoreInputs[i].value);
                if (name && !isNaN(score) && score >= 0 && score <= 100) {
                    currentSubjects.push({ name, score });
                }
            }
            // Save to student record
            if (!currentStudent.monthlyGrades) {
                currentStudent.monthlyGrades = {};
            }
            currentStudent.monthlyGrades[currentMonth] = [...currentSubjects];
            alert(`Grades for ${currentMonth} saved successfully!`);
            displaySubjectsList();
            renderParentMonthSelector(currentStudent); // Update parent view if needed
            renderExistingStudents(); // Update students table
        });
        
        // Create new student
        createStudentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = newStudentId.value.trim();
            const name = newStudentName.value.trim();
            const grade = newStudentGrade.value;
            if (!id || !name || !grade) {
                alert('Please fill in all required fields');
                return;
            }
            const existingStudent = students.find(s => s.id === id);
            if (existingStudent) {
                alert('Student ID already exists');
                return;
            }
            const newStudent = {
                id,
                name,
                grade,
                monthlyGrades: {} // Initialize empty monthly grades
            };
            students.push(newStudent);
            // Reset form
            newStudentId.value = '';
            newStudentName.value = '';
            newStudentGrade.value = '';
            // Update next student number if using default STU prefix
            if (id.startsWith('STU')) {
                const num = parseInt(id.substring(3));
                if (!isNaN(num) && num >= nextStudentNumber - 1) {
                    nextStudentNumber = num + 1;
                }
            }
            alert('Student created successfully!');
            renderExistingStudents();
        });
        
        // Generate Student ID
        function generateStudentId(prefix = 'STU', number = null) {
            if (number === null) {
                number = nextStudentNumber++;
            }
            return `${prefix}${number.toString().padStart(3, '0')}`;
        }
        
        // Initialize generated ID
        generatedStudentId.textContent = generateStudentId();
        standaloneGeneratedId.textContent = generateStudentId();
        
        // Generate new ID button
        generateIdBtn.addEventListener('click', () => {
            const newId = generateStudentId(idPrefix, currentIdNumber++);
            generatedStudentId.textContent = newId;
        });
        
        // Copy ID button
        copyIdBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(generatedStudentId.textContent)
                .then(() => {
                    alert('Student ID copied to clipboard!');
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    alert('Failed to copy ID. Please select and copy manually.');
                });
        });
        
        // Standalone generate button
        standaloneGenerateBtn.addEventListener('click', () => {
            const prefix = customPrefix.value.trim() || 'STU';
            const number = parseInt(idNumber.value) || 1;
            const newId = generateStudentId(prefix, number);
            standaloneGeneratedId.textContent = newId;
            idNumber.value = number + 1;
        });
        
        // Standalone copy button
        standaloneCopyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(standaloneGeneratedId.textContent)
                .then(() => {
                    alert('Student ID copied to clipboard!');
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    alert('Failed to copy ID. Please select and copy manually.');
                });
        });
        
        // Apply custom settings
        applyCustomSettingsBtn.addEventListener('click', () => {
            idPrefix = customPrefix.value.trim() || 'STU';
            currentIdNumber = parseInt(idNumber.value) || 1;
            const newId = generateStudentId(idPrefix, currentIdNumber);
            standaloneGeneratedId.textContent = newId;
            generatedStudentId.textContent = newId;
            alert(`Custom settings applied! Using prefix: ${idPrefix}, starting from: ${currentIdNumber}`);
        });
        
        // Sync generated ID with input field
        generatedStudentId.addEventListener('click', () => {
            newStudentId.value = generatedStudentId.textContent;
        });
        
        // Render existing students table
        function renderExistingStudents() {
            studentsTable.innerHTML = '';
            students.forEach(student => {
                // Count months with data
                let monthsWithData = 0;
                if (student.monthlyGrades) {
                    months.forEach(month => {
                        if (student.monthlyGrades[month] && student.monthlyGrades[month].length > 0) {
                            monthsWithData++;
                        }
                    });
                }
                // Add grade-specific styling
                let gradeClass = '';
                if (student.grade.includes('KG')) {
                    gradeClass = 'grade-kg';
                } else if (student.grade.includes('Grade')) {
                    gradeClass = 'grade-elementary';
                } else if (student.grade.includes('Prep')) {
                    gradeClass = 'grade-prep';
                }
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td><span class="${gradeClass}" style="padding: 4px 8px; border-radius: 4px;">${student.grade}</span></td>
                    <td>${monthsWithData} month(s)</td>
                    <td>
                        <button class="btn btn-warning manage-btn" data-id="${student.id}">Manage Grades</button>
                    </td>
                `;
                studentsTable.appendChild(row);
                // Add event listener to manage button
                row.querySelector('.manage-btn').addEventListener('click', function() {
                    const studentId = this.getAttribute('data-id');
                    const student = students.find(s => s.id === studentId);
                    if (student) {
                        // Switch to Manage Grades tab
                        tabs.forEach(t => t.classList.remove('active'));
                        document.querySelector('[data-tab="manage-grades"]').classList.add('active');
                        tabContents.forEach(content => content.classList.remove('active'));
                        document.getElementById('manage-grades').classList.add('active');
                        // Load the student
                        manageStudentId.value = studentId;
                        currentStudent = student;
                        displayManageStudentInfo(student);
                        renderSchoolMonthSelector(student);
                        manageStudentInfo.style.display = 'block';
                    }
                });
            });
        }
        
        // Export data
        exportDataBtn.addEventListener('click', () => {
            const data = JSON.stringify(students, null, 2);
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'leaders-language-school-data.json';
            a.click();
            URL.revokeObjectURL(url);
        });
        
        // Import data
        importDataInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const loadedData = JSON.parse(e.target.result);
                        if (Array.isArray(loadedData)) {
                            students = loadedData;
                            alert('Data imported successfully!');
                            renderExistingStudents();
                            // Update next student number
                            const maxIdNum = students.reduce((max, student) => {
                                if (student.id.startsWith('STU')) {
                                    const num = parseInt(student.id.substring(3));
                                    return isNaN(num) ? max : Math.max(max, num);
                                }
                                return max;
                            }, 0);
                            nextStudentNumber = maxIdNum + 1;
                        } else {
                            throw new Error('Invalid data format');
                        }
                    } catch (error) {
                        alert('Error loading data: ' + error.message);
                    }
                };
                reader.readAsText(file);
                e.target.value = ''; // Reset file input
            }
        });
        
        // Helper function to find elements by text content
        HTMLElement.prototype.contains = function(text) {
            return this.textContent === text;
        };
        
        // Calculate average score
        function calculateAverage(subjects) {
            if (subjects.length === 0) return 0;
            const total = subjects.reduce((sum, subject) => sum + subject.score, 0);
            return Math.round(total / subjects.length);
        }
        
        // Get letter grade
        function getGradeLetter(score) {
            if (score >= 90) return 'A';
            if (score >= 80) return 'B';
            if (score >= 70) return 'C';
            if (score >= 60) return 'D';
            return 'F';
        }
        
        // Get CSS class for grade badge
        function getGradeBadgeClass(score) {
            if (score >= 90) return 'badge-success';
            if (score >= 80) return 'badge-info';
            if (score >= 70) return 'badge-warning';
            return 'badge-danger';
        }
        
        // Initialize
        renderExistingStudents();
    </script>
</body>
</html>